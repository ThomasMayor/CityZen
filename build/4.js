webpackJsonp([4],{549:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"HomePageModuleNgFactory",function(){return b});var r=n(1),o=n(601),l=n(25),i=n(32),s=n(142),a=n(572),u=n(227),d=n(228),c=n(229),p=n(230),h=n(231),g=n(232),_=n(233),f=n(602),m=n(579),y=n(44),v=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t){function e(e){return t.call(this,e,[u.a,d.a,c.a,p.a,h.a,g.a,_.a,f.a],[])||this}return v(e,t),Object.defineProperty(e.prototype,"_NgLocalization_8",{get:function(){return null==this.__NgLocalization_8&&(this.__NgLocalization_8=new l.j(this.parent.get(r.LOCALE_ID))),this.__NgLocalization_8},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ɵi_9",{get:function(){return null==this.__ɵi_9&&(this.__ɵi_9=new i.q),this.__ɵi_9},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_FormBuilder_10",{get:function(){return null==this.__FormBuilder_10&&(this.__FormBuilder_10=new i.d),this.__FormBuilder_10},enumerable:!0,configurable:!0}),e.prototype.createInternal=function(){return this._CommonModule_0=new l.c,this._ɵba_1=new i.o,this._FormsModule_2=new i.g,this._ReactiveFormsModule_3=new i.m,this._IonicModule_4=new s.a,this._IonicPageModule_5=new s.b,this._MapComponentModule_6=new a.a,this._HomePageModule_7=new o.a,this._LAZY_LOADED_TOKEN_11=m.a,this._HomePageModule_7},e.prototype.getInternal=function(t,e){return t===l.c?this._CommonModule_0:t===i.o?this._ɵba_1:t===i.g?this._FormsModule_2:t===i.m?this._ReactiveFormsModule_3:t===s.a?this._IonicModule_4:t===s.b?this._IonicPageModule_5:t===a.a?this._MapComponentModule_6:t===o.a?this._HomePageModule_7:t===l.k?this._NgLocalization_8:t===i.q?this._ɵi_9:t===i.d?this._FormBuilder_10:t===y.a?this._LAZY_LOADED_TOKEN_11:e},e.prototype.destroyInternal=function(){},e}(r["ɵNgModuleInjector"]),b=new r.NgModuleFactory(k,o.a)},556:function(t,e,n){"use strict";function r(t){return o["ɵvid"](0,[(t()(),o["ɵeld"](0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),o["ɵdid"](278528,null,0,l.g,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),o["ɵeld"](0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(t,e,n){var r=!0,o=t.component;return"click"===e&&(r=!1!==o.backButtonClick(n)&&r),r},s.b,s.a)),o["ɵdid"](278528,null,0,l.g,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o["ɵdid"](1097728,null,0,a.a,[[8,"bar-button"],u.a,o.ElementRef,o.Renderer],null,null),(t()(),o["ɵeld"](0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o["ɵdid"](278528,null,0,l.g,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o["ɵdid"](147456,null,0,d.a,[u.a,o.ElementRef,o.Renderer],{name:[0,"name"]},null),(t()(),o["ɵeld"](0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),o["ɵdid"](278528,null,0,l.g,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),o["ɵted"](null,["",""])),o["ɵncd"](null,0),o["ɵncd"](null,1),o["ɵncd"](null,2),(t()(),o["ɵeld"](0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),o["ɵdid"](278528,null,0,l.g,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o["ɵncd"](null,3)],function(t,e){var n=e.component;t(e,1,0,"toolbar-background","toolbar-background-"+n._mode);t(e,3,0,"back-button","back-button-"+n._mode);t(e,6,0,"back-button-icon","back-button-icon-"+n._mode),t(e,7,0,n._bbIcon);t(e,9,0,"back-button-text","back-button-text-"+n._mode);t(e,15,0,"toolbar-content","toolbar-content-"+n._mode)},function(t,e){var n=e.component;t(e,2,0,n._hideBb),t(e,5,0,o["ɵnov"](e,7)._hidden),t(e,10,0,n._backText)})}n.d(e,"a",function(){return _}),e.b=r;var o=n(1),l=n(25),i=n(51),s=n(65),a=n(26),u=n(2),d=n(43),c=n(9),p=n(8),h=n(33),g=[],_=o["ɵcrt"]({encapsulation:2,styles:g,data:{}});o["ɵccf"]("ion-navbar",i.a,function(t){return o["ɵvid"](0,[(t()(),o["ɵeld"](0,null,null,1,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,r,_)),o["ɵdid"](49152,null,0,i.a,[c.a,[2,p.a],[2,h.a],u.a,o.ElementRef,o.Renderer],null,null)],null,function(t,e){t(e,0,0,o["ɵnov"](e,1)._hidden,o["ɵnov"](e,1)._sbPadding)})},{color:"color",mode:"mode",hideBackButton:"hideBackButton"},{},["[menuToggle],ion-buttons[left]","ion-buttons[start]","ion-buttons[end],ion-buttons[right]","*"])},557:function(t,e,n){"use strict";function r(t){return o["ɵvid"](2,[(t()(),o["ɵeld"](0,null,null,2,"div",[["class","toolbar-title"]],null,null,null,null,null)),o["ɵdid"](278528,null,0,l.g,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o["ɵncd"](null,0)],function(t,e){t(e,1,0,"toolbar-title","toolbar-title-"+e.component._mode)},null)}n.d(e,"a",function(){return c}),e.b=r;var o=n(1),l=n(25),i=n(139),s=n(2),a=n(66),u=n(51),d=[],c=o["ɵcrt"]({encapsulation:2,styles:d,data:{}});o["ɵccf"]("ion-title",i.a,function(t){return o["ɵvid"](0,[(t()(),o["ɵeld"](0,null,null,1,"ion-title",[],null,null,null,r,c)),o["ɵdid"](49152,null,0,i.a,[s.a,o.ElementRef,o.Renderer,[2,a.a],[2,u.a]],null,null)],null,null)},{color:"color",mode:"mode"},{},["*"])},558:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r;!function(t){t[t.Agriculture=0]="Agriculture",t[t.GreenSpaces=1]="GreenSpaces",t[t.SportAndYouth=2]="SportAndYouth",t[t.UrbanFurniture=3]="UrbanFurniture",t[t.Transports=4]="Transports",t[t.Health=5]="Health",t[t.Social=6]="Social",t[t.Security=7]="Security",t[t.Last=7]="Last"}(r||(r={}));var o={get range(){return Array(r.Last+1).fill(0).map(function(t,e){return e})},getColor:function(t){switch(t){case r.Agriculture:return"#00BCD4";case r.GreenSpaces:return"#009688";case r.SportAndYouth:return"#2196F3";case r.UrbanFurniture:return"#3F51B5";case r.Transports:return"#673AB7";case r.Health:return"#9C27B0";case r.Social:return"#CDDC39";case r.Security:return"#4CAF50"}},getName:function(t){switch(t){case r.Agriculture:return"Agriculture";case r.GreenSpaces:return"Espaces Verts";case r.SportAndYouth:return"Jeunesse et Sports";case r.UrbanFurniture:return"Mobilier urbain";case r.Transports:return"Transports Publiques";case r.Health:return"Santé";case r.Social:return"Social";default:return"Sécurité"}}}},562:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(1),o=(n(138),n(580)),l=(n.n(o),n(140),n(144),n(147),function(){function t(t,e,n,o){this.toastCtrl=t,this.reportProvider=e,this.mapProvider=n,this.geoLocationProvider=o,this.reportClick=new r.EventEmitter,this.mapClick=new r.EventEmitter,this.MAP_PIN="M25 0c-8.284 0-15 6.656-15 14.866 0 8.211 15 35.135 15 35.135s15-26.924 15-35.135c0-8.21-6.716-14.866-15-14.866zm-.049 19.312c-2.557 0-4.629-2.055-4.629-4.588 0-2.535 2.072-4.589 4.629-4.589 2.559 0 4.631 2.054 4.631 4.589 0 2.533-2.072 4.588-4.631 4.588z",this.markers=[],this.initialized=!1}return t.prototype.init=function(t,e,n,r){var o=this;void 0===r&&(r=12),console.log("map init ",t,e,n);var l=!1;return new Promise(function(i,s){o.mapProvider.mapInitialized$.subscribe(function(s){o.initialized=s,s&&(t||(o.initMap(e,n,r),l=!0,o.map.addListener("click",function(t){return o.onMapClick(t)}),i()),o.geoLocationProvider.position$.subscribe(function(e){e&&(t&&!l&&(o.initMap(e.coords.latitude,e.coords.longitude,r),l=!0,o.map.addListener("dblclick",function(t){return o.onMapClick(t)}),o.initUserMarker(e.coords.latitude,e.coords.longitude),i()),t&&o.userMarker.setPosition(new google.maps.LatLng(e.coords.latitude,e.coords.longitude)))}))},function(t){return s(t)})})},t.prototype.onMapClick=function(t){this.mapClick.emit(t)},t.prototype.initMap=function(t,e,n){console.log("initMap"),this.map=new google.maps.Map(document.getElementById("map_canvas_"+this.mapId),{center:new google.maps.LatLng(t,e),zoom:n,maxZoom:20,clickableIcons:!1,mapTypeControl:!1,fullscreenControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT},zoomControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT,style:google.maps.ZoomControlStyle.DEFAULT}}),this.markerCluster=new o(this.map,this.markers,{imagePath:"assets/img/m"})},t.prototype.onMarkerClick=function(t,e){this.showReport(e.data)},t.prototype.showReport=function(t){console.log("emitting event",t),this.reportClick.emit(t)},t.prototype.handleError=function(t){console.log("Error",t,this.toastCtrl),this.toastCtrl.create({message:t.message?t.message:t,closeButtonText:"Fermer",showCloseButton:!0}).present()},t.prototype.initUserMarker=function(t,e){var n={path:google.maps.SymbolPath.CIRCLE,fillColor:"#039be5",fillOpacity:.8,scale:8,strokeColor:"white",strokeWeight:2};(this.userMarker=new google.maps.Marker({position:new google.maps.LatLng(t,e),title:"Votre position",icon:n,map:this.map})).setZIndex(1e3)},t.prototype.addMarker=function(t,e,n,r){var o=this,l={path:this.MAP_PIN,anchor:new google.maps.Point(25,50),fillColor:n,fillOpacity:.8,scale:.8,strokeColor:"white",strokeWeight:2},i=new google.maps.Marker({position:new google.maps.LatLng(t,e),icon:l});i.data=r,i.addListener("click",function(t){return o.onMarkerClick(t,i)}),this.markers.push(i),this.markerCluster.addMarkers([i],!1)},t.prototype.clearMarkers=function(){var t=this;this.markers.forEach(function(e,n){t.markerCluster.removeMarker(e,n<t.markers.length-1)}),this.markers=[]},t}())},572:function(t,e,n){"use strict";n.d(e,"a",function(){return r});n(1),n(138),n(562);var r=function(){return function(){}}()},579:function(t,e,n){"use strict";n.d(e,"a",function(){return o});n(1),n(138),n(562),n(140);var r=n(558),o=(n(152),function(){function t(t,e,n,r,o,l,i){var s=this;this.navCtrl=t,this.navParams=e,this.reportProvider=n,this.modalCtrl=r,this.alertCtrl=o,this.popoverCtrl=l,this.reportFilter=i,this.autoRefreshReports=!0,this.autoRefreshReports=!1,this.reportFilter.categoryFilter$.subscribe(function(t){s.categoryFilter=t}),this.reportFilter.dateFilter$.subscribe(function(t){s.dateFilter=t}),this.autoRefreshReports=!0}return Object.defineProperty(t.prototype,"dateFilter",{set:function(t){console.log("set dateFilter",t,this._dateFilter),this._dateFilter!==t&&(this._dateFilter=t,this.autoRefreshReports&&this.refreshReports())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categoryFilter",{set:function(t){console.log("set categoryFilter",t,this._categoryFilter),this._categoryFilter!==t&&(this._categoryFilter=t,this.autoRefreshReports&&this.refreshReports())},enumerable:!0,configurable:!0}),t.prototype.ionViewDidLoad=function(){var t=this;console.log("ionViewDidLoad HomePage",this.map),this.map.init(!0).then(function(e){t.refreshReports()})},t.prototype.refreshReports=function(){var t=this;this.reportProvider.loadAll({dateFilter:this._dateFilter,categoryFilter:this._categoryFilter}).then(function(e){t.map.clearMarkers(),e.forEach(function(e){return t.map.addMarker(e.latitude,e.longitude,r.b.getColor(e.category),e)})})},t.prototype.moreClick=function(t){console.log("moreClick",t),this.popoverCtrl.create("FilterPage").present({ev:t})},t.prototype.mapClick=function(t){var e=this.modalCtrl.create("NewReportPage",{test:{lat:t.latLng.lat(),lng:t.latLng.lng(),created:new Date(Math.round(8206297872*Math.random())+14935896e5)}});e.onDidDismiss(function(t){t?console.log("New report : ",t):console.log("No new report")}),e.present()},t.prototype.reportClick=function(t){var e=this;console.log("report click"),this.alertCtrl.create({title:t.title,message:t.description,buttons:[{text:"Fermer"},{text:"Afficher",handler:function(n){console.log("alert click",t),e.showReport(t)}}]}).present()},t.prototype.showReport=function(t){console.log("Should display",t),this.navCtrl.push("ReportPage",{report:t})},t.prototype.addReport=function(){console.log("addReport");var t=this.modalCtrl.create("NewReportPage");t.onDidDismiss(function(t){t?console.log("New report : ",t):console.log("No new report")}),t.present()},t}())},580:function(t,e,n){(function(e){function n(t,e,r){this.extend(n,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var o=r||{};this.gridSize_=o.gridSize||60,this.minClusterSize_=o.minimumClusterSize||2,this.maxZoom_=o.maxZoom||null,this.styles_=o.styles||[],this.imagePath_=o.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=o.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=o.zoomOnClick&&(this.zoomOnClick_=o.zoomOnClick),this.averageCenter_=!1,void 0!=o.averageCenter&&(this.averageCenter_=o.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var l=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=l.map_.getZoom();l.prevZoom_!=t&&(l.prevZoom_=t,l.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){l.redraw()}),e&&e.length&&this.addMarkers(e,!1)}function r(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new o(this,t.getStyles(),t.getGridSize())}function o(t,e,n){t.getMarkerClusterer().extend(o,google.maps.OverlayView),this.styles_=e,this.padding_=n||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}n.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",n.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",n.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},n.prototype.onAdd=function(){this.setReady_(!0)},n.prototype.draw=function(){},n.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},n.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),n=new google.maps.LatLngBounds,r=0;t=e[r];r++)n.extend(t.getPosition());this.map_.fitBounds(n)},n.prototype.setStyles=function(t){this.styles_=t},n.prototype.getStyles=function(){return this.styles_},n.prototype.isZoomOnClick=function(){return this.zoomOnClick_},n.prototype.isAverageCenter=function(){return this.averageCenter_},n.prototype.getMarkers=function(){return this.markers_},n.prototype.getTotalMarkers=function(){return this.markers_.length},n.prototype.setMaxZoom=function(t){this.maxZoom_=t},n.prototype.getMaxZoom=function(){return this.maxZoom_},n.prototype.calculator_=function(t,e){for(var n=0,r=t.length,o=r;0!==o;)o=parseInt(o/10,10),n++;return n=Math.min(n,e),{text:r,index:n}},n.prototype.setCalculator=function(t){this.calculator_=t},n.prototype.getCalculator=function(){return this.calculator_},n.prototype.addMarkers=function(t,e){for(var n,r=0;n=t[r];r++)this.pushMarkerTo_(n);e||this.redraw()},n.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})}this.markers_.push(t)},n.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},n.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var n,r=0;n=this.markers_[r];r++)if(n==t){e=r;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},n.prototype.removeMarker=function(t,e){var n=this.removeMarker_(t);return!(e||!n)&&(this.resetViewport(),this.redraw(),!0)},n.prototype.removeMarkers=function(t,e){for(var n,r=!1,o=0;n=t[o];o++){var l=this.removeMarker_(n);r=r||l}if(!e&&r)return this.resetViewport(),this.redraw(),!0},n.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},n.prototype.getTotalClusters=function(){return this.clusters_.length},n.prototype.getMap=function(){return this.map_},n.prototype.setMap=function(t){this.map_=t},n.prototype.getGridSize=function(){return this.gridSize_},n.prototype.setGridSize=function(t){this.gridSize_=t},n.prototype.getMinClusterSize=function(){return this.minClusterSize_},n.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},n.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),r=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(n);o.x+=this.gridSize_,o.y-=this.gridSize_;var l=e.fromLatLngToDivPixel(r);l.x-=this.gridSize_,l.y+=this.gridSize_;var i=e.fromDivPixelToLatLng(o),s=e.fromDivPixelToLatLng(l);return t.extend(i),t.extend(s),t},n.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},n.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},n.prototype.resetViewport=function(t){for(var e,n=0;e=this.clusters_[n];n++)e.remove();for(var r,n=0;r=this.markers_[n];n++)r.isAdded=!1,t&&r.setMap(null);this.clusters_=[]},n.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var e,n=0;e=t[n];n++)e.remove()},0)},n.prototype.redraw=function(){this.createClusters_()},n.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var n=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},n.prototype.addToClosestCluster_=function(t){for(var e,n=4e4,o=null,l=(t.getPosition(),0);e=this.clusters_[l];l++){var i=e.getCenter();if(i){var s=this.distanceBetweenPoints_(i,t.getPosition());s<n&&(n=s,o=e)}}o&&o.isMarkerInClusterBounds(t)?o.addMarker(t):((e=new r(this)).addMarker(t),this.clusters_.push(e))},n.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),n=this.getExtendedBounds(e),r=0;t=this.markers_[r];r++)!t.isAdded&&this.isMarkerInBounds_(t,n)&&this.addToClosestCluster_(t)},r.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,n=0;e=this.markers_[n];n++)if(e==t)return!0;return!1},r.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,n=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,r=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(n,r),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var o=this.markers_.length;if(o<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),o==this.minClusterSize_)for(var l=0;l<o;l++)this.markers_[l].setMap(null);return o>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},r.prototype.getMarkerClusterer=function(){return this.markerClusterer_},r.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers(),r=0;t=n[r];r++)e.extend(t.getPosition());return e},r.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},r.prototype.getSize=function(){return this.markers_.length},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getCenter=function(){return this.center_},r.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},r.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},r.prototype.getMap=function(){return this.map_},r.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var n,r=0;n=this.markers_[r];r++)n.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var o=this.markerClusterer_.getStyles().length,l=this.markerClusterer_.getCalculator()(this.markers_,o);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(l),this.clusterIcon_.show()}},o.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},o.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this;google.maps.event.addDomListener(this.div_,"click",function(){e.triggerClusterClick()})},o.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10),e},o.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},o.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},o.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},o.prototype.remove=function(){this.setMap(null)},o.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},o.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},o.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition},o.prototype.setCenter=function(t){this.center_=t},o.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var n=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+n+";"),"object"==typeof this.anchor_?(e.push("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?"height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;":"height:"+this.height_+"px; line-height:"+this.height_+"px;"),e.push("number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?"width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;":"width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var r=this.textColor_?this.textColor_:"black",o=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+r+"; position:absolute; font-size:"+o+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},e.MarkerClusterer=n,n.prototype.addMarker=n.prototype.addMarker,n.prototype.addMarkers=n.prototype.addMarkers,n.prototype.clearMarkers=n.prototype.clearMarkers,n.prototype.fitMapToMarkers=n.prototype.fitMapToMarkers,n.prototype.getCalculator=n.prototype.getCalculator,n.prototype.getGridSize=n.prototype.getGridSize,n.prototype.getExtendedBounds=n.prototype.getExtendedBounds,n.prototype.getMap=n.prototype.getMap,n.prototype.getMarkers=n.prototype.getMarkers,n.prototype.getMaxZoom=n.prototype.getMaxZoom,n.prototype.getStyles=n.prototype.getStyles,n.prototype.getTotalClusters=n.prototype.getTotalClusters,n.prototype.getTotalMarkers=n.prototype.getTotalMarkers,n.prototype.redraw=n.prototype.redraw,n.prototype.removeMarker=n.prototype.removeMarker,n.prototype.removeMarkers=n.prototype.removeMarkers,n.prototype.resetViewport=n.prototype.resetViewport,n.prototype.repaint=n.prototype.repaint,n.prototype.setCalculator=n.prototype.setCalculator,n.prototype.setGridSize=n.prototype.setGridSize,n.prototype.setMaxZoom=n.prototype.setMaxZoom,n.prototype.onAdd=n.prototype.onAdd,n.prototype.draw=n.prototype.draw,r.prototype.getCenter=r.prototype.getCenter,r.prototype.getSize=r.prototype.getSize,r.prototype.getMarkers=r.prototype.getMarkers,o.prototype.onAdd=o.prototype.onAdd,o.prototype.draw=o.prototype.draw,o.prototype.onRemove=o.prototype.onRemove,t.exports=n}).call(e,n(53))},581:function(t,e,n){"use strict";function r(t){return o["ɵvid"](0,[(t()(),o["ɵted"](null,["\n"])),(t()(),o["ɵeld"](0,null,null,9,"div",[["class","map_canvas"]],[[8,"id",0]],null,null,null,null)),(t()(),o["ɵted"](null,["\n  "])),(t()(),o["ɵeld"](0,null,null,0,"div",[["class","holder"]],null,null,null,null,null)),(t()(),o["ɵted"](null,["\n  "])),(t()(),o["ɵeld"](0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,l.b,l.a)),o["ɵdid"](114688,null,0,i.a,[s.a,o.ElementRef,o.Renderer],null,null),(t()(),o["ɵted"](null,["\n  "])),(t()(),o["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(t()(),o["ɵted"](null,["Chargement de la carte..."])),(t()(),o["ɵted"](null,["\n"])),(t()(),o["ɵted"](null,["\n"]))],function(t,e){t(e,6,0)},function(t,e){var n=e.component;t(e,1,0,o["ɵinlineInterpolate"](1,"map_canvas_",n.mapId,"")),t(e,5,0,o["ɵnov"](e,6)._paused)})}n.d(e,"a",function(){return g}),e.b=r;var o=n(1),l=n(582),i=n(150),s=n(2),a=n(562),u=n(99),d=n(140),c=n(147),p=n(144),h=[],g=o["ɵcrt"]({encapsulation:2,styles:h,data:{}});o["ɵccf"]("map",a.a,function(t){return o["ɵvid"](0,[(t()(),o["ɵeld"](0,null,null,1,"map",[],null,null,null,r,g)),o["ɵdid"](49152,null,0,a.a,[u.a,d.a,c.a,p.a],null,null)],null,null)},{mapId:"mapId"},{reportClick:"reportClick",mapClick:"mapClick"},[])},582:function(t,e,n){"use strict";function r(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,null,null,2,":svg:svg",[["viewBox","0 0 64 64"]],null,null,null,null,null)),i["ɵdid"](278528,null,0,s.l,[i.KeyValueDiffers,i.ElementRef,i.Renderer],{ngStyle:[0,"ngStyle"]},null),(t()(),i["ɵeld"](0,null,null,0,":svg:circle",[["transform","translate(32,32)"]],[[1,"r",0]],null,null,null,null))],function(t,e){t(e,1,0,e.context.$implicit.style)},function(t,e){t(e,2,0,e.context.$implicit.r)})}function o(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,null,null,2,":svg:svg",[["viewBox","0 0 64 64"]],null,null,null,null,null)),i["ɵdid"](278528,null,0,s.l,[i.KeyValueDiffers,i.ElementRef,i.Renderer],{ngStyle:[0,"ngStyle"]},null),(t()(),i["ɵeld"](0,null,null,0,":svg:line",[["transform","translate(32,32)"]],[[1,"y1",0],[1,"y2",0]],null,null,null,null))],function(t,e){t(e,1,0,e.context.$implicit.style)},function(t,e){t(e,2,0,e.context.$implicit.y1,e.context.$implicit.y2)})}function l(t){return i["ɵvid"](2,[(t()(),i["ɵand"](16777216,null,null,1,null,r)),i["ɵdid"](802816,null,0,s.h,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["ɵand"](16777216,null,null,1,null,o)),i["ɵdid"](802816,null,0,s.h,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,1,0,n._c),t(e,3,0,n._l)},null)}n.d(e,"a",function(){return c}),e.b=l;var i=n(1),s=n(25),a=n(150),u=n(2),d=[],c=i["ɵcrt"]({encapsulation:2,styles:d,data:{}});i["ɵccf"]("ion-spinner",a.a,function(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,l,c)),i["ɵdid"](114688,null,0,a.a,[u.a,i.ElementRef,i.Renderer],null,null)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,i["ɵnov"](e,1)._paused)})},{color:"color",mode:"mode",name:"name",duration:"duration",paused:"paused"},{},[])},601:function(t,e,n){"use strict";n.d(e,"a",function(){return r});n(1),n(138),n(579),n(572);var r=function(){return function(){}}()},602:function(t,e,n){"use strict";function r(t){return l["ɵvid"](0,[(t()(),l["ɵeld"](0,null,null,9,"ion-fab",[["bottom",""],["right",""]],null,null,null,i.b,i.a)),l["ɵdid"](1228800,null,2,s.a,[a.a],null,null),l["ɵqud"](335544320,4,{_mainButton:0}),l["ɵqud"](603979776,5,{_fabLists:1}),(t()(),l["ɵted"](0,["\n    "])),(t()(),l["ɵeld"](0,null,0,3,"button",[["color","secondary"],["ion-fab",""]],null,[[null,"click"]],function(t,e,n){var r=!0,o=t.component;return"click"===e&&(r=!1!==o.addReport()&&r),r},u.b,u.a)),l["ɵdid"](49152,[[4,4]],0,d.a,[c.a,l.ElementRef,l.Renderer],{color:[0,"color"]},null),(t()(),l["ɵeld"](0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),l["ɵdid"](147456,null,0,p.a,[c.a,l.ElementRef,l.Renderer],{name:[0,"name"]},null),(t()(),l["ɵted"](0,["\n "]))],function(t,e){t(e,6,0,"secondary");t(e,8,0,"add")},function(t,e){t(e,7,0,l["ɵnov"](e,8)._hidden)})}function o(t){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{map:0}),(t()(),l["ɵted"](null,["\n"])),(t()(),l["ɵeld"](0,null,null,32,"ion-header",[],null,null,null,null,null)),l["ɵdid"](16384,null,0,h.a,[c.a,l.ElementRef,l.Renderer,[2,g.a]],null,null),(t()(),l["ɵted"](null,["\n  "])),(t()(),l["ɵeld"](0,null,null,28,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,_.b,_.a)),l["ɵdid"](49152,null,0,f.a,[m.a,[2,g.a],[2,y.a],c.a,l.ElementRef,l.Renderer],null,null),(t()(),l["ɵted"](3,["\n    "])),(t()(),l["ɵeld"](0,null,0,8,"button",[["ion-button",""],["menuToggle",""]],[[8,"hidden",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==l["ɵnov"](t,10).toggle()&&r),r},v.b,v.a)),l["ɵdid"](1097728,[[2,4]],0,k.a,[[8,""],c.a,l.ElementRef,l.Renderer],null,null),l["ɵdid"](1064960,null,0,b.a,[C.a,[2,g.a],[2,k.a],[2,f.a]],{menuToggle:[0,"menuToggle"]},null),l["ɵdid"](16384,null,1,M.a,[c.a,l.ElementRef,l.Renderer,[2,R.a],[2,f.a]],null,null),l["ɵqud"](603979776,2,{_buttons:1}),(t()(),l["ɵted"](0,["\n      "])),(t()(),l["ɵeld"](0,null,0,1,"ion-icon",[["name","menu"],["role","img"]],[[2,"hide",null]],null,null,null,null)),l["ɵdid"](147456,null,0,p.a,[c.a,l.ElementRef,l.Renderer],{name:[0,"name"]},null),(t()(),l["ɵted"](0,["\n    "])),(t()(),l["ɵted"](3,["\n    "])),(t()(),l["ɵeld"](0,null,3,2,"ion-title",[],null,null,null,w.b,w.a)),l["ɵdid"](49152,null,0,x.a,[c.a,l.ElementRef,l.Renderer,[2,R.a],[2,f.a]],null,null),(t()(),l["ɵted"](0,["Carte des Constats"])),(t()(),l["ɵted"](3,["\n    "])),(t()(),l["ɵeld"](0,null,2,10,"ion-buttons",[["end",""]],null,null,null,null,null)),l["ɵdid"](16384,null,1,M.a,[c.a,l.ElementRef,l.Renderer,[2,R.a],[2,f.a]],null,null),l["ɵqud"](603979776,3,{_buttons:1}),(t()(),l["ɵted"](null,["\n      "])),(t()(),l["ɵeld"](0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var r=!0,o=t.component;return"click"===e&&(r=!1!==o.moreClick(n)&&r),r},v.b,v.a)),l["ɵdid"](1097728,[[3,4]],0,k.a,[[8,""],c.a,l.ElementRef,l.Renderer],null,null),(t()(),l["ɵted"](0,["\n        "])),(t()(),l["ɵeld"](0,null,0,1,"ion-icon",[["name","more"],["role","img"]],[[2,"hide",null]],null,null,null,null)),l["ɵdid"](147456,null,0,p.a,[c.a,l.ElementRef,l.Renderer],{name:[0,"name"]},null),(t()(),l["ɵted"](0,["\n      "])),(t()(),l["ɵted"](null,["\n    "])),(t()(),l["ɵted"](3,["\n  "])),(t()(),l["ɵted"](null,["\n"])),(t()(),l["ɵted"](null,["\n"])),(t()(),l["ɵeld"](0,null,null,8,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,P.b,P.a)),l["ɵdid"](4374528,null,0,L.a,[c.a,a.a,E.a,l.ElementRef,l.Renderer,m.a,I.a,l.NgZone,[2,g.a],[2,y.a]],null,null),(t()(),l["ɵted"](1,["\n  "])),(t()(),l["ɵeld"](0,null,1,1,"map",[["mapId","mainMap"]],null,[[null,"reportClick"],[null,"mapClick"]],function(t,e,n){var r=!0,o=t.component;return"reportClick"===e&&(r=!1!==o.reportClick(n)&&r),"mapClick"===e&&(r=!1!==o.mapClick(n)&&r),r},z.b,z.a)),l["ɵdid"](49152,[[1,4]],0,T.a,[A.a,F.a,B.a,O.a],{mapId:[0,"mapId"]},{reportClick:"reportClick",mapClick:"mapClick"}),(t()(),l["ɵted"](1,["\n  "])),(t()(),l["ɵand"](16777216,null,0,1,null,r)),l["ɵdid"](16384,null,0,D.i,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["ɵted"](1,["\n"])),(t()(),l["ɵted"](null,["\n"]))],function(t,e){var n=e.component;t(e,10,0,"");t(e,15,0,"menu");t(e,30,0,"more");t(e,40,0,"mainMap"),t(e,43,0,n.map.initialized)},function(t,e){t(e,5,0,l["ɵnov"](e,6)._hidden,l["ɵnov"](e,6)._sbPadding),t(e,8,0,l["ɵnov"](e,10).isHidden),t(e,14,0,l["ɵnov"](e,15)._hidden),t(e,29,0,l["ɵnov"](e,30)._hidden),t(e,36,0,l["ɵnov"](e,37).statusbarPadding,l["ɵnov"](e,37)._hasRefresher)})}n.d(e,"a",function(){return q});var l=n(1),i=n(603),s=n(156),a=n(7),u=n(604),d=n(70),c=n(2),p=n(43),h=n(146),g=n(8),_=n(556),f=n(51),m=n(9),y=n(33),v=n(65),k=n(26),b=n(154),C=n(27),M=n(151),R=n(66),w=n(557),x=n(139),S=n(579),P=n(234),L=n(38),E=n(12),I=n(34),z=n(581),T=n(562),A=n(99),F=n(140),B=n(147),O=n(144),D=n(25),N=n(18),V=n(107),Z=n(103),G=n(108),H=n(152),j=[],K=l["ɵcrt"]({encapsulation:2,styles:j,data:{}}),q=l["ɵccf"]("page-home",S.a,function(t){return l["ɵvid"](0,[(t()(),l["ɵeld"](0,null,null,1,"page-home",[],null,null,null,o,K)),l["ɵdid"](49152,null,0,S.a,[y.a,N.a,F.a,V.a,Z.a,G.a,H.a],null,null)],null,null)},{},{},[])},603:function(t,e,n){"use strict";function r(t){return o["ɵvid"](0,[o["ɵncd"](null,0)],null,null)}n.d(e,"a",function(){return a}),e.b=r;var o=n(1),l=n(156),i=n(7),s=[],a=o["ɵcrt"]({encapsulation:2,styles:s,data:{}});o["ɵccf"]("ion-fab",l.a,function(t){return o["ɵvid"](0,[(t()(),o["ɵeld"](0,null,null,3,"ion-fab",[],null,null,null,r,a)),o["ɵdid"](1228800,null,2,l.a,[i.a],null,null),o["ɵqud"](335544320,1,{_mainButton:0}),o["ɵqud"](603979776,2,{_fabLists:1})],null,null)},{},{},["*"])},604:function(t,e,n){"use strict";function r(t){return o["ɵvid"](2,[(t()(),o["ɵeld"](0,null,null,1,"ion-icon",[["class","fab-close-icon"],["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o["ɵdid"](147456,null,0,l.a,[i.a,o.ElementRef,o.Renderer],{name:[0,"name"]},null),(t()(),o["ɵeld"](0,null,null,1,"span",[["class","button-inner"]],null,null,null,null,null)),o["ɵncd"](null,0),(t()(),o["ɵeld"](0,null,null,0,"div",[["class","button-effect"]],null,null,null,null,null))],function(t,e){t(e,1,0,"close")},function(t,e){t(e,0,0,o["ɵnov"](e,1)._hidden)})}n.d(e,"a",function(){return u}),e.b=r;var o=n(1),l=n(43),i=n(2),s=n(70),a=[],u=o["ɵcrt"]({encapsulation:2,styles:a,data:{}});o["ɵccf"]("[ion-fab]",s.a,function(t){return o["ɵvid"](0,[(t()(),o["ɵeld"](0,null,null,1,"div",[["ion-fab",""]],null,null,null,r,u)),o["ɵdid"](49152,null,0,s.a,[i.a,o.ElementRef,o.Renderer],null,null)],null,null)},{color:"color",mode:"mode"},{},["*"])}});